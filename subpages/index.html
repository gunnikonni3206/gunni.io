<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>My Rad Retro Site</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
  <style>
    body {
      background-image: url(https://onlinegiftools.com/images/examples-onlinegiftools/surface-3d-projection.gif);
      background-repeat: no-repeat;
      background-attachment: fixed;
      background-size: cover;
      height: 100vh;
      margin: 0;
      color: #000;
      display: flex;
      flex-direction: column;
      background-color: rgba(0, 0, 0, 0.7);
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: rgba(255, 255, 204, 0.8);
      padding: 10px;
      border-bottom: 3px solid #663300;
    }
    nav {
      display: flex;
      gap: 10px;
    }
    nav button {
      padding: 10px 15px;
      background-color: #663300;
      color: #000;
      border: none;
      cursor: pointer;
      border-radius: 5px;
      transition: background 0.2s;
    }
    nav button:hover {
      background-color: #993300;
    }
    h1 {
      font-size: 3em;
      text-align: center;
      color: #000;
      background-color: rgba(255, 255, 204, 0.9);
      padding: 10px;
      border: 3px outset #663300;
      margin: 0;
    }
    .content {
      display: flex;
      flex: 1;
    }
    .sidebar {
      background-color: rgba(255, 255, 204, 0.8);
      padding: 15px;
      border-right: 3px solid #663300;
      width: 300px;
      box-shadow: 2px 0 5px rgba(0, 0, 0, 0.3);
    }
    .sidebar h3 {
      margin-top: 0;
      color: #000;
      text-align: center;
    }
    .sidebar ul {
      list-style: none;
      padding: 0;
    }
    .sidebar ul li {
      margin: 10px 0;
    }
    .sidebar ul li a {
      color: #000;
      text-decoration: none;
    }
    .sidebar ul li a:hover {
      text-decoration: underline;
    }
    .toptext {
      background-color: rgba(255, 255, 204, 0.8);
      border-radius: 8px;
    }
    .toptext p {
      color: #333333;
    }
    .toptext ul {
      list-style-type: none;
    }
    .toptext a {
      text-decoration: none;
      color: #0077cc;
    }
    .toptext a:hover {
      color: #00ff37;
    }
    .main {
      flex: 1;
      padding: 20px;
    }
    p {
      font-size: 1.2em;
      line-height: 1.5;
      color: #000;
    }
    a {
      color: #000;
      text-decoration: underline;
    }
    a:hover {
      color: #990000;
    }
    .blinking {
      animation: blink 1s infinite;
    }
    @keyframes blink {
      50% { opacity: 0; }
    }
    marquee {
      background-color: #FFCC99;
      padding: 10px;
      font-weight: bold;
      color: #000;
    }
    table {
      width: 100%;
      margin: 20px 0;
      border-collapse: collapse;
    }
    td, th {
      border: 1px solid #663300;
      padding: 10px;
      text-align: center;
      color: #ffffff;
    }
    .construction {
      text-align: center;
      margin-top: 20px;
    }
    .gif-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-around;
      margin-top: 20px;
    }
    .gif-section {
      margin-top: 40px;
      text-align: center;
      background-color: rgba(255, 255, 204, 0.8);
      border: 3px solid #663300;
      padding: 10px;
    }
    .gif {
      width: 200px;
      height: 200px;
      margin: 10px;
    }
    .omnimon-core {
      margin-top: 40px;
    }
    footer {
      text-align: center;
      margin-top: 20px;
      padding: 10px;
      background-color: rgba(255, 255, 204, 0.9);
      border-top: 2px solid #663300;
      font-size: 1.2em;
      color: #000;
    }
    .ad {
      display: none;
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: rgba(255, 255, 204, 0.9);
      border: 2px solid #663300;
      padding: 10px;
      box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);
      z-index: 1000;
      text-align: center;
    }
    .ad img {
      width: 100px;
      height: auto;
    }
    .ad a {
      color: #000;
      text-decoration: none;
    }
    /* New styles for the GIF section in the middle */
    .gif-replace {
      background-color: rgba(0, 0, 0, 0.8);
      border: 3px solid #663300;
      padding: 10px;
      text-align: center;
      margin-top: 20px;
    }
    .gif-replace img {
      width: 300px;
      height: auto;
    }
    /* Styles for the Snake Game */
    .snake-game {
      text-align: center;
      margin: 40px 0;
      background-color: rgba(255, 255, 204, 0.8);
      border: 3px solid #663300;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
      position: relative;
    }
    .snake-game .score-board {
      display: flex;
      justify-content: center;
      gap: 50px;
      margin-bottom: 10px;
      font-size: 1.2em;
      color: #fff;
    }
    #snakeCanvas {
      background-color: #000;
      border: 2px solid #663300;
    }
    /* Game Over Overlay */
    .game-over {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      color: #fff;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      font-size: 1.5em;
      display: none;
    }
    .game-over.active {
      display: flex;
    }
    .game-over button {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #663300;
      color: #fff;
      border: none;
      cursor: pointer;
      border-radius: 5px;
      font-size: 1em;
    }
    .game-over button:hover {
      background-color: #993300;
    }
    /* Ad Button */
    .ad-button {
      display: inline-block;
      background: linear-gradient(45deg, #ff0080, #ff8c00, #ffd800, #80ff00, #00ff8c, #00d4ff, #0080ff, #3f00ff);
      padding: 15px 30px;
      color: white;
      text-align: center;
      border: none;
      border-radius: 50px;
      font-size: 1.5em;
      text-decoration: none;
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
      animation: glowing 1.5s infinite alternate;
      transition: transform 0.2s;
      position: relative;
      margin-top: 20px;
    }
    .ad-button:hover {
      transform: scale(1.1);
    }
    @keyframes glowing {
      0% { box-shadow: 0 0 5px rgba(255, 255, 255, 0.5); }
      100% { box-shadow: 0 0 20px rgba(255, 255, 255, 1); }
    }
    /* Chat Sidebar Styles */
    .chat-sidebar {
      margin-top: 20px;
      padding-top: 10px;
      border-top: 2px solid #663300;
    }
    .chat-sidebar h3 {
      margin: 0 0 10px 0;
      font-size: 1.2em;
      text-align: center;
    }
    .chat-sidebar .utterances-container {
      border: 2px solid #663300;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(102, 51, 0, 0.5);
      background-color: rgba(255, 255, 204, 0.9);
      padding: 10px;
      margin-bottom: 10px;
      max-height: 300px;
      overflow-y: auto;
    }
    .scroll-down-btn {
      display: block;
      width: 100%;
      padding: 5px;
      font-size: 1.2em;
      cursor: pointer;
      background-color: #663300;
      color: #fff;
      border: none;
      border-radius: 5px;
      transition: background 0.2s;
    }
    .scroll-down-btn:hover {
      background-color: #993300;
    }
    /* Tower Stacking Game Styles */
    .tower-stacking-game {
      margin-top: 20px;
      padding: 10px;
      background-color: #222;
      color: #0f0;
      font-family: 'Press Start 2P', cursive;
      border: 3px solid #663300;
      text-align: center;
    }
    .tower-stacking-game canvas {
      background-color: #000;
      border: 2px solid #663300;
      display: block;
      margin: 0 auto;
    }
    .tower-stacking-game button {
      margin-top: 10px;
      padding: 8px 16px;
      font-family: 'Press Start 2P', cursive;
      font-size: 0.8em;
      border: 2px solid #00ff00;
      background: linear-gradient(45deg, #00ff00, #006600);
      color: #000;
      cursor: pointer;
      border-radius: 5px;
      box-shadow: 0 0 10px #00ff00;
    }
    #subIntroOverlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: black;
      z-index: 10000;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      color: #FFCC99;
      font-family: 'Press Start 2P', cursive;
      font-size: 2em;
      text-shadow: 0 0 10px #FFCC99;
      transition: transform 1.5s ease-out, opacity 1.5s ease-out;
    }
    #subIntroOverlay.hidden {
      transform: scale(20);
      opacity: 0;
    }
    /* New YouTube Player Styles */
    .youtube-player {
      background-color: rgba(255, 255, 204, 0.9);
      padding: 15px;
      border: 3px inset #663300;
      margin-top: 20px;
      text-align: center;
    }
  </style>
</head>
<body>
  <div id="subIntroOverlay">
    <p>Welcome to my Website full of FUN!!! <span class="blinking">&#9733;</span></p>
  </div>

  <header>
    <h1>
      Welcome to my Website full of FUN!!!
      <span class="blinking">&#9733;</span>
    </h1>
    <nav>
      <button onclick="location.href='about.html'">About</button>
      <button onclick="location.href='gallery.html'">Gallery</button>
      <button onclick="location.href='contact.html'">Contact</button>
      <button onclick="location.href='links.html'">Links</button>
      <button onclick="location.href='games.html'">Game</button>
    </nav>
  </header>

  <div class="content">
    <div class="sidebar">
      <h3>Sidebar Navigation</h3>
      <ul>
        <li><a href="#">Link 1</a></li>
        <li><a href="#">Link 2</a></li>
        <li><a href="#">Link 3</a></li>
        <li><a href="#">Link 4</a></li>
        <li><a href="#">Link 5</a></li>
      </ul>

      <div class="chat-sidebar">
        <h3>Web Chat</h3>
        <div class="utterances-container">
          <script
            src="https://utteranc.es/client.js"
            repo="gunnikonni3206/gunni.io"
            issue-term="pathname"
            label="chat"
            theme="github-light"
            crossorigin="anonymous"
            async>
          </script>
        </div>
        <button class="scroll-down-btn" onclick="scrollToChat()">&#x2193;</button>
        <button onclick="location.href='chat.html'" style="width: 100%; margin-top:10px; padding: 5px; font-size:0.9em;">
          Go to Chat Page
        </button>
      </div>

      <!-- Retro Tower Stacking Game -->
      <div class="tower-stacking-game">
        <h3>Tower Stacking</h3>
        <canvas id="towerCanvas" width="280" height="300"></canvas>
        <p id="towerScore">Score: 0</p>
        <button id="towerRestart" style="display: none;">Restart Tower Game</button>
      </div>
    </div>

    <div class="main">
      <div class="toptext">
        <p>
          What's up? This is my super cool website. I like to put stuff online and share it with everyone.
          Take a look at these awesome links:
        </p>
        <ul>
          <li><a href="https://www.askjeeves.com">Ask Jeeves!</a></li>
          <li><a href="https://www.geocities.com/SunsetStrip/Palms/8314/">GeoCities</a></li>
          <li><a href="https://www.angelfire.com">Angelfire</a></li>
        </ul>
      </div>
      
      <p>Here's a rad table:</p>
      <table>
        <tr>
          <th>Favorite Artist</th>
          <th>Favorite Movies</th>
          <th>Favorite Games</th>
        </tr>
        <tr>
          <td>Ken Carson</td>
          <td>rango</td>
          <td>terraria</td>
        </tr>
        <tr>
          <td>mice band</td>
          <td>kung fury</td>
          <td>spore</td>
        </tr>
      </table>

      <marquee>
        dont miss 2026!
      </marquee>

      <div class="gif-replace">
        <img src="https://i.gifer.com/4jwo.gif" alt="Ad GIF" />
      </div>

      <div class="construction">
        <img src="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExamZyemN1aDZ1djZkemppOHQ5ZWxlbDBqMTd2eXh0emN4N3hkbTRuYyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/fxGwvQJ4rT1WIfYB4X/giphy.gif" alt="Under Construction" />
        <p>This site is under construction!</p>
      </div>

      <!-- Replaced Guestbook and MIDI sections with a polished YouTube player -->
      <div class="youtube-player">
        <h3>Featured Video</h3>
        <iframe width="560" height="315" src="https://www.youtube.com/embed/_nRxfjUg1dA?si=fa_CvonGzsXk6pZU" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
      </div>

      <div class="hit-counter">
        <p>
          You are visitor number
          <img src="https://www.easycounter.com/counter.php?jayretro" alt="Hit Counter" />
        </p>
      </div>
    </div>
  </div>

  <div class="gif-section">
    <h2>Awesome GIFs!</h2>
    <div class="gif-container">
      <img src="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExdTU5bDd5dzd2YW5mMWR5MGFhaWIzdG1pc2hyeHB3MWZrZ2Z3ZHY2ZSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/3o7WTFmAMnKd7DyrQY/giphy.gif" class="gif" alt="Alien GIF" />
      <p>Alien 3D GIF</p>
      <img src="https://64.media.tumblr.com/c7afc2c50ed9e85688f41ecd01cd66bb/506b3524aab785ba-a1/s500x750/245391ee0bac3e5a808859985fd5d9ab18300ff6.gif" class="gif" alt="GIF" />
      <p>Cool Animated GIF</p>
      <img src="https://img.clipart-library.com/2/clip-alien-gif/clip-alien-gif-5.gif" class="gif" alt="Alien GIF" />
      <p>Another Alien GIF</p>
      <img src="https://i.gifer.com/Xbmy.gif" class="gif" alt="GIF" />
      <p>Funny GIF</p>
      <img src="https://img1.picmix.com/output/stamp/thumb/7/8/1/1/1591187_d2920.gif" class="gif" alt="GIF" />
      <p>Stamp GIF</p>
      <img src="https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/1733170/extras/04.gif?t=1728068477" class="gif" alt="GIF" />
      <p>Steam GIF</p>
      <img src="https://media.tenor.com/Jn31WhiPpBYAAAAM/digimon-adventure.gif" class="gif" alt="Digimon GIF" />
      <p>Digimon Adventure GIF</p>
      <img src="https://media.tenor.com/cg-dZ4x1P8kAAAAM/digimon-adventure-digimon.gif" class="gif" alt="Digimon GIF" />
      <p>Digimon Adventure Character GIF</p>
    </div>
  </div>

  <div class="omnimon-core gif-section">
    <h2>Omnimon Core!</h2>
    <div class="gif-container">
      <img src="https://64.media.tumblr.com/1b94518f62bda019b7a1a1d3f30e7802/ff52e35e4be9ae1d-76/s540x810/71a9e0f70ed5acc0919a987ced9f4c1a0c31715c.gif" class="gif" alt="Omnimon GIF" />
      <p>Omnimon GIF</p>
      <img src="https://lh3.googleusercontent.com/uVpGVAo7fbYRKBwfhGOsKrpU7CKQLfDPWDJZUGLxEJWWLGaqmfjMWOBIuWT9oEwzIBGD1BYbfhsfK6Ax12EmRbA4h8Bqz3HY9j6-NiHjdLe4Ma8KqllJawtnAmxONoIOPnBAxQm1sobO_2c2LvjSi8i5yjSRJjD9DC-1Nc90lljoGKI_pKsUfWTzmJCKNw" class="gif" alt="Omnimon GIF" />
      <p>Powerful Omnimon GIF</p>
      <img src="https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/653ab876-d70e-406f-8d7f-3aea70ea2221/da37vxl-e2535ec6-4a2d-45b7-93d8-d7d3acd8eb39.gif?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiJcL2ZcLzY1M2FiODc2LWQ3MGUtNDA2Zi04ZDdmLTNhZWE3MGVhMjIyMVwvZGEzN3Z4bC1lMjUzNWVjNi00YTJkLTQ1YjctOTNkOC1kN2QzYWNkOGViMzkuZ2lmIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.qN5B-qcLZ_NDY-Wtr5liNoV3NLYc3UOsXEQ8dyPLog0" class="gif" alt="Omnimon GIF" />
      <p>Epic Battle Omnimon GIF</p>
      <img src="https://31.media.tumblr.com/077850a0185cd204d435e8d9db9c581e/tumblr_n6pt1oFrWa1t0zxm0o7_400.gif" class="gif" alt="Omnimon GIF" />
      <p>Omnimon Action GIF</p>
      <img src="https://media.tenor.com/mvyOJBQOW0oAAAAM/digimon-adventure.gif" class="gif" alt="Omnimon GIF" />
      <p>Classic Digimon GIF</p>
      <img src="https://media.tenor.com/xgQ-T2IwVQEAAAAM/omnimon-power.gif" class="gif" alt="Omnimon GIF" />
      <p>Omnimon Power GIF</p>
      <img src="https://64.media.tumblr.com/69b9e052f3ec3676d2584ec642f1a687/0cdf0c75c55ebada-34/s540x810/b0dfb6644219777ed725e8f4d7336a3b2b3cd313.gif" class="gif" alt="Omnimons GIF" />
      <p>Omnimon Transformation GIF</p>
      <img src="https://comicvine.gamespot.com/a/uploads/original/11130/111301681/7883173-altdelete.gif" class="gif" alt="Omnimon GIF" />
      <p>Omnimon Alt GIF</p>
    </div>
  </div>

  <div class="snake-game">
    <h2>Play Snake!</h2>
    <div class="score-board">
      <span>Score: <span id="score">0</span></span>
      <span>High Score: <span id="highScore">0</span></span>
    </div>
    <canvas id="snakeCanvas" width="400" height="400"></canvas>

    <div class="game-over" id="gameOver">
      <p>Game Over!</p>
      <p>Your Score: <span id="finalScore">0</span></p>
      <p>High Score: <span id="finalHighScore">0</span></p>
      <button onclick="restartGame()">Restart Game</button>
    </div>
  </div>

  <div class="ad" id="ad">
    <a href="spore.html">
      <img src="https://i.gifer.com/4jwo.gif" alt="Ad GIF" style="width: 100px; height: auto;" />
      <p>ðŸŒŸ Don't miss out on our special offer! Click here for a surprise! ðŸŒŸ</p>
    </a>
  </div>

  <footer>
    <p>&copy; 2024 My Retro Website | All Rights Reserved</p>
    <p>Follow us on:</p>
    <p>
      <a href="https://x.com/gunnikonni1" style="color: #000;">Twitter</a> |
      <a href="https://www.youtube.com/@wojbjart/videos" style="color: #000;">YouTube</a>
    </p>
    <p>Contact us: info@myretrowebsite.com</p>
    <p>Check out our latest updates on our blog!</p>
  </footer>

  <script>
    function scrollToChat() {
      const chatContainer = document.querySelector('.chat-sidebar .utterances-container');
      if (chatContainer) {
        chatContainer.scrollTo({ top: chatContainer.scrollHeight, behavior: 'smooth' });
      }
    }
    
    const utterancesContainer = document.querySelector('.chat-sidebar .utterances-container');
    const observer = new MutationObserver(mutations => {
      mutations.forEach(mutation => {
        mutation.addedNodes.forEach(node => {
          if (node.nodeName === 'IFRAME') {
            node.addEventListener('load', () => {
              utterancesContainer.scrollTop = utterancesContainer.scrollHeight;
            });
          }
        });
      });
    });
    observer.observe(utterancesContainer, { childList: true });
  </script>

  <script>
    function showAd() {
      const ad = document.getElementById("ad");
      const shouldShow = Math.random() < 0.5;
      ad.style.display = shouldShow ? "block" : "none";
    }
    setInterval(showAd, 10000);
  </script>

  <script>
    // Snake Game Script (unchanged)
    const canvas = document.getElementById("snakeCanvas");
    const ctx = canvas.getContext("2d");

    const scoreElement = document.getElementById("score");
    const highScoreElement = document.getElementById("highScore");
    const finalScoreElement = document.getElementById("finalScore");
    const finalHighScoreElement = document.getElementById("finalHighScore");
    const gameOverOverlay = document.getElementById("gameOver");

    const grid = 20;
    let count = 0;
    let snake = { x: 160, y: 160, dx: grid, dy: 0, cells: [], maxCells: 4 };
    let apple = { x: 320, y: 320 };
    let score = 0;
    let highScore = 0;
    let speed = 4;
    let obstacles = [];

    if (localStorage.getItem("highScore")) {
      highScore = parseInt(localStorage.getItem("highScore"));
      highScoreElement.textContent = highScore;
    }

    function generateObstacles(number) {
      obstacles = [];
      for (let i = 0; i < number; i++) {
        let obstacle;
        do {
          obstacle = { x: getRandomInt(0, 20) * grid, y: getRandomInt(0, 20) * grid };
        } while (
          (obstacle.x === apple.x && obstacle.y === apple.y) ||
          (obstacle.x === snake.x && obstacle.y === snake.y) ||
          obstacles.some(obs => obs.x === obstacle.x && obs.y === obstacle.y)
        );
        obstacles.push(obstacle);
      }
    }

    generateObstacles(5);

    function getRandomInt(min, max) {
      return Math.floor(Math.random() * (max - min)) + min;
    }

    function gameLoop() {
      requestAnimationFrame(gameLoop);
      if (++count < speed) return;
      count = 0;
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = "gray";
      obstacles.forEach(obstacle => {
        ctx.fillRect(obstacle.x, obstacle.y, grid - 1, grid - 1);
      });
      ctx.fillStyle = "red";
      ctx.fillRect(apple.x, apple.y, grid - 1, grid - 1);
      snake.x += snake.dx;
      snake.y += snake.dy;
      if (snake.x < 0) snake.x = canvas.width - grid;
      else if (snake.x >= canvas.width) snake.x = 0;
      if (snake.y < 0) snake.y = canvas.height - grid;
      else if (snake.y >= canvas.height) snake.y = 0;
      snake.cells.unshift({ x: snake.x, y: snake.y });
      if (snake.cells.length > snake.maxCells) snake.cells.pop();
      ctx.fillStyle = "green";
      snake.cells.forEach((cell, index) => {
        ctx.fillRect(cell.x, cell.y, grid - 1, grid - 1);
        if (cell.x === apple.x && cell.y === apple.y) {
          snake.maxCells++;
          score++;
          scoreElement.textContent = score;
          if (score > highScore) {
            highScore = score;
            highScoreElement.textContent = highScore;
            localStorage.setItem("highScore", highScore);
          }
          let newApple;
          do {
            newApple = { x: getRandomInt(0, 20) * grid, y: getRandomInt(0, 20) * grid };
          } while (isOccupied(newApple.x, newApple.y));
          apple = newApple;
          if (score % 5 === 0) generateObstacles(1);
        }
        for (let i = index + 1; i < snake.cells.length; i++) {
          if (cell.x === snake.cells[i].x && cell.y === snake.cells[i].y) endGame();
        }
        obstacles.forEach(obstacle => {
          if (cell.x === obstacle.x && cell.y === obstacle.y) endGame();
        });
      });
    }

    function isOccupied(x, y) {
      for (let cell of snake.cells) {
        if (cell.x === x && cell.y === cell.y) return true;
      }
      for (let obstacle of obstacles) {
        if (obstacle.x === x && obstacle.y === obstacle.y) return true;
      }
      return false;
    }

    function endGame() {
      gameOverOverlay.classList.add("active");
      finalScoreElement.textContent = score;
      finalHighScoreElement.textContent = highScore;
      cancelAnimationFrame(gameLoop);
    }

    function restartGame() {
      gameOverOverlay.classList.remove("active");
      snake.x = 160;
      snake.y = 160;
      snake.cells = [];
      snake.maxCells = 4;
      snake.dx = grid;
      snake.dy = 0;
      score = 0;
      speed = 4;
      scoreElement.textContent = score;
      apple = { x: 320, y: 320 };
      generateObstacles(5);
      requestAnimationFrame(gameLoop);
    }

    document.addEventListener("keydown", function(e) {
      if (e.which === 37 && snake.dx === 0) { snake.dx = -grid; snake.dy = 0; }
      else if (e.which === 38 && snake.dy === 0) { snake.dy = -grid; snake.dx = 0; }
      else if (e.which === 39 && snake.dx === 0) { snake.dx = grid; snake.dy = 0; }
      else if (e.which === 40 && snake.dy === 0) { snake.dy = grid; snake.dx = 0; }
    });

    requestAnimationFrame(gameLoop);
  </script>

  <!-- Retro Tower Stacking Game Script with Delta Time, Glows & Gradients, and Restart -->
  <script>
    const towerCanvas = document.getElementById("towerCanvas");
    const towerCtx = towerCanvas.getContext("2d");

    // Global variables for the Tower game
    let towerBlockWidth = 200;
    const towerBlockHeight = 30;
    let towerScore = 0;
    let gameOverTower = false;
    let lastTimeTower = null;

    // Stack array holds placed blocks.
    const stack = [];
    // Add base block (centered)
    stack.push({ x: (towerCanvas.width - towerBlockWidth) / 2, width: towerBlockWidth, y: towerCanvas.height - towerBlockHeight });

    // Current moving block (starts above the base)
    let currentBlock = {
      x: 0,
      y: towerCanvas.height - towerBlockHeight * 2,
      width: towerBlockWidth,
      direction: 1, // 1: moving right, -1: moving left
      speed: 150 // pixels per second
    };

    function drawTower() {
      towerCtx.clearRect(0, 0, towerCanvas.width, towerCanvas.height);
      // Calculate an offset if the tower goes off the top so you can keep stacking
      const offset = currentBlock.y < 0 ? -currentBlock.y : 0;

      // Draw each block in the stack with a glowing gradient
      for (let block of stack) {
        const grad = towerCtx.createLinearGradient(block.x, block.y + offset, block.x + block.width, block.y + offset + towerBlockHeight);
        grad.addColorStop(0, "#00ff00");
        grad.addColorStop(1, "#006600");
        towerCtx.shadowBlur = 15;
        towerCtx.shadowColor = "#00ff00";
        towerCtx.fillStyle = grad;
        towerCtx.fillRect(block.x, block.y + offset, block.width, towerBlockHeight);
        towerCtx.shadowBlur = 0;
      }
      // Draw the current moving block with a yellow glow
      if (!gameOverTower) {
        const grad = towerCtx.createLinearGradient(currentBlock.x, currentBlock.y + offset, currentBlock.x + currentBlock.width, currentBlock.y + offset + towerBlockHeight);
        grad.addColorStop(0, "#ffff00");
        grad.addColorStop(1, "#ffaa00");
        towerCtx.shadowBlur = 20;
        towerCtx.shadowColor = "#ffff00";
        towerCtx.fillStyle = grad;
        towerCtx.fillRect(currentBlock.x, currentBlock.y + offset, currentBlock.width, towerBlockHeight);
        towerCtx.shadowBlur = 0;
      }
    }

    // Use delta time for smooth movement
    function updateTower(timestamp) {
      if (lastTimeTower === null) lastTimeTower = timestamp;
      const dt = (timestamp - lastTimeTower) / 1000; // seconds elapsed
      lastTimeTower = timestamp;

      if (!gameOverTower) {
        // Update current block's horizontal position using delta time
        currentBlock.x += currentBlock.speed * dt * currentBlock.direction;
        // Reverse direction if hitting the canvas edges
        if (currentBlock.x < 0) {
          currentBlock.x = 0;
          currentBlock.direction = 1;
        } else if (currentBlock.x + currentBlock.width > towerCanvas.width) {
          currentBlock.x = towerCanvas.width - currentBlock.width;
          currentBlock.direction = -1;
        }
      }
      drawTower();
      if (!gameOverTower) requestAnimationFrame(updateTower);
    }

    // Called when the player "drops" the block (click on canvas or press Space)
    function dropBlock() {
      if (gameOverTower) return;
      const lastBlock = stack[stack.length - 1];
      const overlapStart = Math.max(lastBlock.x, currentBlock.x);
      const overlapEnd = Math.min(lastBlock.x + lastBlock.width, currentBlock.x + currentBlock.width);
      const overlapWidth = overlapEnd - overlapStart;

      // If no overlap, game over
      if (overlapWidth <= 0) {
        gameOverTower = true;
        document.getElementById("towerRestart").style.display = "block";
        return;
      }

      // Trim the current block to the overlapping region
      currentBlock.width = overlapWidth;
      currentBlock.x = overlapStart;
      // Add the block to the stack with its current y coordinate
      stack.push({ x: currentBlock.x, width: currentBlock.width, y: currentBlock.y });
      towerScore++;
      document.getElementById("towerScore").textContent = "Score: " + towerScore;

      // Prepare the next block: move up by one block height
      currentBlock.y -= towerBlockHeight;
      // Reset horizontal position and direction for new block
      currentBlock.x = 0;
      currentBlock.direction = 1;
      // Increase speed slightly for added challenge
      currentBlock.speed += 20;
      // Continue the animation (if it had been stopped due to game over, it won't restart here)
    }

    // Restart the tower stacking game
    function restartTower() {
      towerScore = 0;
      document.getElementById("towerScore").textContent = "Score: " + towerScore;
      // Reset the stack with a new base block
      stack.length = 0;
      stack.push({ x: (towerCanvas.width - towerBlockWidth) / 2, width: towerBlockWidth, y: towerCanvas.height - towerBlockHeight });
      // Reset the current moving block
      currentBlock = {
        x: 0,
        y: towerCanvas.height - towerBlockHeight * 2,
        width: towerBlockWidth,
        direction: 1,
        speed: 150
      };
      gameOverTower = false;
      lastTimeTower = null;
      document.getElementById("towerRestart").style.display = "none";
      requestAnimationFrame(updateTower);
    }

    // Event listeners for dropping a block
    towerCanvas.addEventListener("click", dropBlock);
    document.addEventListener("keydown", function(e) {
      if (e.code === "Space") dropBlock();
    });
    // Event listener for the restart button
    document.getElementById("towerRestart").addEventListener("click", restartTower);

    // Start the tower game animation
    requestAnimationFrame(updateTower);
  </script>

  <a class="ad-button" href="ads.html">Click for Ads!</a>

  <script>
    window.addEventListener("load", function() {
      setTimeout(function() {
        const overlay = document.getElementById("subIntroOverlay");
        overlay.classList.add("hidden");
        setTimeout(() => overlay.remove(), 1500);
      }, 500);
    });
  </script>
</body>
</html>
